spring.application.name=SWP391

# Server Configuration - ??c PORT t? Railway
server.port=${PORT:8080}
# Disable Open Session In View (OSIV) - t?t cho performance
spring.jpa.open-in-view=false

# Database Configuration - S? d?ng env vars
spring.datasource.url=${DATABASE_URL:}
spring.datasource.username=${DATABASE_USERNAME:}
spring.datasource.password=${DATABASE_PASSWORD:}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA/Hibernate properties
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:update}
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Ho_Chi_Minh

# Logging
logging.level.org.hibernate=OFF
logging.level.org.springframework.orm.jpa=OFF
spring.jpa.show-sql=false

# JWT Secret Key
app.jwt.secret=${JWT_SECRET:}

# Google OAuth2 Configuration
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID:}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET:}
spring.security.oauth2.client.registration.google.redirect-uri=${GOOGLE_REDIRECT_URI:}
spring.security.oauth2.client.registration.google.scope=email,profile,openid
spring.security.oauth2.client.provider.google.user-info-uri=https://www.googleapis.com/oauth2/v3/userinfo

# Facebook OAuth2 Configuration
spring.security.oauth2.client.registration.facebook.client-id=${FACEBOOK_CLIENT_ID:}
spring.security.oauth2.client.registration.facebook.client-secret=${FACEBOOK_CLIENT_SECRET:}
spring.security.oauth2.client.registration.facebook.redirect-uri=${FACEBOOK_REDIRECT_URI:http://localhost:3000/social}
spring.security.oauth2.client.registration.facebook.scope=email,public_profile
spring.security.oauth2.client.provider.facebook.authorization-uri=https://www.facebook.com/v21.0/dialog/oauth
spring.security.oauth2.client.provider.facebook.token-uri=https://graph.facebook.com/oauth/access_token
spring.security.oauth2.client.provider.facebook.user-info-uri=https://graph.facebook.com/me?fields=id,name,email,picture

# Profile
spring.profiles.active=${SPRING_PROFILES_ACTIVE:}

# Email Configuration (Gmail)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Timeout configuration để tránh chờ quá lâu khi gửi email
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Scheduling
spring.task.scheduling.pool.size=2
# VNPay Configuration
vnpay.url=${VNPAY_URL:https://sandbox.vnpayment.vn/paymentv2/vpcpay.html}
vnpay.tmn-code=${VNPAY_TMN_CODE:}
vnpay.hash-secret=${VNPAY_HASH_SECRET:}
vnpay.return-url=${VNPAY_RETURN_URL:http://localhost:3000/payment/result}
vnpay.version=2.1.0
vnpay.command=pay

# Gemini API Configuration
gemini.api.key=${GEMINI_API_KEY:}
gemini.api.base-url=https://generativelanguage.googleapis.com
gemini.api.model=gemini-2.5-flash

# Rate Limiter
resilience4j.ratelimiter.instances.gemini-limiter.limitForPeriod=5
resilience4j.ratelimiter.instances.gemini-limiter.limitRefreshPeriod=1m
resilience4j.ratelimiter.instances.gemini-limiter.timeoutDuration=0

# Actuator (cho health checks)
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized